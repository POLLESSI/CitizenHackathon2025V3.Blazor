@inherits LayoutComponentBase
@using Blazored.Toast
@using Blazored.Toast.Configuration
@using Blazored.Toast.Services

<button class="btn btn-primary" @onclick="ShowTestToast">
    Test the toast
</button>

@* <BlazoredToast ToastId="Toast1" Position="ToastPosition.TopRight" /> *@

<main class="layout-container">
    <header class="main-header">
        <NavMenu />
    </header>

    <section class="layout-body">
        @Body
    </section>

    <footer class="main-footer">
        <p>© @DateTime.Now.Year - OutZen by CitizenHackathon2025 🇧🇪</p>
    </footer>

    <!-- Canvas for animated decor -->
    <canvas id="layoutBackgroundCanvas" width="800" height="400"></canvas>
</main>

@* <BlazoredToast ToastId="Toast2" Position="ToastPosition.BottomRight" /> *@

@code {
    [Inject] private IJSRuntime JsRuntime { get; set; } = default!;
    [Inject] private IToastService ToastService { get; set; } = default!;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender) return;

        try
        {
            var module = await JsRuntime.InvokeAsync<IJSObjectReference>(
                "import",
                "./js/layoutCanvas.js"
            );

            await module.InvokeVoidAsync("startBackgroundCanvas");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"❌ JS error in MainLayout: {ex.Message}");
        }
        if (firstRender)
        {
            try
            {
                var module = await JS.InvokeAsync<IJSObjectReference>("import", "./js/layoutCanvas.js");
                await module.InvokeVoidAsync("startBackgroundCanvas");
            }
            catch (Exception ex)
            {
                Console.WriteLine($"❌ JS error in MainLayout: {ex.Message}");
            }
        }
    }
    private void ShowTestToast()
    {
        ToastService.ShowSuccess("It works!"/* , "Success" */);
    }
}












































































                    @* // Copyrigtht (c) 2025 Citizen Hackathon https://github.com/POLLESSI/Citizenhackathon2025V3.Blazor.Client. All rights reserved. *@